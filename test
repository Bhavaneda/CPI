const { test, expect } = require('@playwright/test');

test('Display all button components inside a div', async ({ page }) => {
  await page.goto('your-application-url');
  await page.waitForNavigation();

  // Wait for the container div to be visible
  const containerDiv = await page.waitForSelector('div.abcd', { state: 'visible' });

  // Get all buttons within the container
  const buttons = await containerDiv.$$('button');

  // Iterate over each button and log its text content and attributes
  for (let button of buttons) {
    const buttonText = await button.innerText();
    const buttonAttributes = await button.attributes();
    console.log(`Button Text: ${buttonText}`);
    console.log(`Button Attributes: ${JSON.stringify(buttonAttributes, null, 2)}`);
  }
});






const { test, expect } = require('@playwright/test');

test('Interact with "Summary" button based on initial aria-selected state', async ({ page }) => {
  // Navigate to the application URL
  await page.goto('your-application-url');
  await page.waitForNavigation();

  // Wait for the "Summary" button to be visible and interactable
  const summaryButton = await page.waitForSelector('button.but[aria-selected="true"]', { state: 'visible' });

  // Verify the initial state of the button
  const isInitiallySelected = await summaryButton.getAttribute('aria-selected');
  expect(isInitiallySelected).toBe('true');

  // Click on the "Summary" button
  await summaryButton.click();

  // Wait for any state change or action to complete
  await page.waitForTimeout(1000); // Adjust timeout as necessary

  // Verify the expected outcome or state change
  // For example, check if the button state has changed or a success message appears
  // Example: Verify a success message
  const toastMessage = await page.locator('div.Toastify__toast:has-text("Added to watchlist successfully")');
  await expect(toastMessage).toBeVisible();
});




const { test, expect } = require('@playwright/test');

test('should locate and click the "Summary" button and verify the action', async ({ page }) => {
  // Navigate to the page
  await page.goto('your-application-url');

  // Wait for the button with text "Summary" to be visible
  const summaryButton = page.locator('button:has-text("Summary")');
  await summaryButton.waitFor({ state: 'visible' });

  // Click the "Summary" button
  await summaryButton.click();

  // Wait for the result of the click action
  // This could be a change in some content or the appearance of a specific element
  await page.waitForTimeout(1000); // Adjust timeout as needed

  // Verify the change
  // Example: Check if specific content is displayed after clicking the "Summary" button
  const content = await page.locator('selector-for-the-content-changed-by-button-click');
  await expect(content).toBeVisible();
});








const { test, expect } = require('@playwright/test');

test('should add to watchlist and show success message', async ({ page }) => {
  // Navigate to the page
  await page.goto('your-application-url');

  // Click the star icon to add to watchlist
  await page.click('svg[data-testid="StarIcon"]');

  // Wait for the toast notification to appear
  await page.waitForSelector('div.Toastify__toast', { timeout: 5000 });

  // Get all toast messages and check for the specific text
  const toastMessages = await page.locator('div.Toastify__toast').allTextContents();
  const foundToast = toastMessages.some(text => text.includes('Added to watchlist successfully'));
  expect(foundToast).toBe(true);
});






const { chromium, expect } = require('playwright');

(async () => {
  const browser = await chromium.launch({ headless: false }); // Launch browser in non-headless mode for debugging
  const page = await browser.newPage();

  // Navigate to your webpage
  await page.goto('https://example.com'); // Replace with your actual URL

  // Wait for the SVG element with data-testid='StarIcon' to be visible
  const starIcon = await page.locator('svg[data-testid="StarIcon"]');
  await starIcon.waitFor({ state: 'visible' });

  // Click the SVG element to add to watchlist
  await starIcon.click();

  // Wait for the element with class 'bg-yellow-600' to be visible
  const elementWithYellowClass = await page.locator('.bg-yellow-600');
  await elementWithYellowClass.waitFor({ state: 'visible' });

  // Assert that the element has the class 'bg-yellow-600'
  await expect(elementWithYellowClass).toHaveClass('bg-yellow-600');

  // Wait for the "Added to watchlist successfully" toast message
  const addedToastMessage = await page.locator('.Toastify__toast').withText('Added to watchlist successfully');
  await addedToastMessage.waitFor({ state: 'visible' });

  // Click the SVG element again to remove from watchlist
  await starIcon.click();

  // Wait for the element with class 'bg-yellow-600' to be hidden
  await elementWithYellowClass.waitFor({ state: 'hidden' });

  // Wait for the "Removed from watchlist successfully" toast message
  const removedToastMessage = await page.locator('.Toastify__toast').withText('Removed from watchlist successfully');
  await removedToastMessage.waitFor({ state: 'visible' });

  // Take a screenshot for debugging
  await page.screenshot({ path: 'final-state.png' });

  // Close the browser
  await browser.close();
})();







const { chromium } = require('playwright');

(async () => {
  const browser = await chromium.launch({ headless: false }); // Launch browser in non-headless mode for debugging
  const page = await browser.newPage();

  // Navigate to your webpage
  await page.goto('https://example.com'); // Replace with your actual URL

  // Wait for the SVG element with data-testid='StarIcon' to be visible
  const starIcon = await page.locator('svg[data-testid="StarIcon"]');
  await starIcon.waitFor({ state: 'visible' });

  // Click the SVG element
  await starIcon.click();

  // Take a screenshot for debugging
  await page.screenshot({ path: 'after-click-star-icon.png' });

  // Close the browser
  await browser.close();
})();






const { chromium } = require('playwright');

(async () => {
  const browser = await chromium.launch({ headless: false }); // Launch browser in non-headless mode for debugging
  const page = await browser.newPage();

  // Navigate to your webpage
  await page.goto('https://example.com');  // Replace with your actual URL

  // Click on the div containing the <Star /> component
  await page.click('div:has(svg.abcd)'); // Adjust this selector to target the correct <div> with <Star />

  // Adding a delay to observe changes
  await page.waitForTimeout(2000); // Wait for 2 seconds to give time for the class to be applied

  // Wait for the div to change and have the class 'bg-yellow-600'
  try {
    await page.waitForSelector('div.bg-yellow-600', { timeout: 5000 });  // Wait for up to 5 seconds
    console.log('Class "bg-yellow-600" applied successfully');
  } catch (error) {
    console.error('Error: Class "bg-yellow-600" not found');
  }

  // Validate if the class has been applied
  const hasClass = await page.locator('div.bg-yellow-600').isVisible();
  console.log('Class "bg-yellow-600" applied:', hasClass);

  // Take a screenshot for debugging
  await page.screenshot({ path: 'debug-screenshot.png' });

  // Close the browser
  await browser.close();
})();








const { chromium } = require('playwright');

(async () => {
  const browser = await chromium.launch({ headless: false }); // Launch browser in non-headless mode for debugging
  const page = await browser.newPage();

  // Navigate to your webpage
  await page.goto('https://example.com');  // Replace with your actual URL

  // Click on the div containing <Star />
  await page.click('div:has(svg)'); // Adjust this selector to target the correct <div> with <Star />

  // Wait for the div to change and have the class 'bg-yellow-600'
  await page.waitForSelector('div.bg-yellow-600', { timeout: 5000 });  // Wait for up to 5 seconds

  // Validate if the class has been applied
  const hasClass = await page.locator('div.bg-yellow-600').isVisible();
  console.log('Class "bg-yellow-600" applied:', hasClass);

  // Close the browser
  await browser.close();
})();






const { chromium } = require('playwright');

(async () => {
  const browser = await chromium.launch();
  const page = await browser.newPage();

  // Navigate to your webpage
  await page.goto('https://example.com');  // Replace with your actual URL

  // Wait for the div that contains the star icon
  const divWithStar = await page.waitForSelector('div[class^="bg-yellow-600"]'); // Waiting for the div with bg-yellow-600 class

  // Click on the div element to toggle favorite
  await divWithStar.click();

  // Perform further actions if needed after clicking

  // Close the browser
  await browser.close();
})();






const { test, expect } = require('@playwright/test');

test('click SVG and verify class change', async ({ page }) => {
  // Open the URL
  await page.goto('your-url-here');

  // Locate the parent div containing both the text "AAPL" and the SVG
  const parentDiv = await page.locator('div.flex.items-start');

  // Locate the specific SVG within the parent div
  const svg = await parentDiv.locator('svg.abcd');

  // Click the SVG element
  await svg.click();

  // Verify that the class of the div has changed to "bg-yellow-600"
  await expect(parentDiv).toHaveClass(/bg-yellow-600/);
});






const { test, expect } = require('@playwright/test');

test.describe('SVG Click Test', () => {
  test('should click SVG and verify class change on div', async ({ page }) => {
    // Navigate to the page
    await page.goto('http://localhost:3000'); // Adjust the URL as needed

    // Wait for the SVG element to appear in the DOM
    const svgSelector = 'svg.abcd';
    const svgElement = page.locator(svgSelector);
    await svgElement.waitFor({ state: 'attached' });

    // Log page content to verify the presence of the SVG element
    console.log(await page.content());

    // Ensure the SVG element is visible
    await expect(svgElement).toBeVisible();

    // Click the SVG element
    await svgElement.click();

    // Locate the div element and verify its class changes to 'bg-yellow-600'
    const divSelector = 'div.bg-yellow-600';
    const divElement = page.locator(divSelector);

    // Wait for the class change to occur
    await divElement.waitFor({ state: 'attached' });

    // Assert that the div has the expected class
    await expect(divElement).toHaveClass(/bg-yellow-600/);
  });
});








import { test, expect } from '@playwright/test';

test.describe('Search and Watchlist Components', () => {
  test.beforeEach(async ({ page }) => {
    // Navigate to the search page
    await page.goto('http://localhost:3000/search');
  });

  test('should show loading indicator and display search results progressively, then add to watchlist', async ({ page }) => {
    // Define the progressive inputs
    const progressiveInputs = ['A', 'Ap', 'App', 'Appl', 'Apple'];

    for (const input of progressiveInputs) {
      // Type into the search input
      await page.fill('#searchInput', input);

      // Check if the loading indicator is visible
      const loadingIndicator = page.locator('[role="progressbar"]'); // Adjust the selector to match the actual loading indicator
      await expect(loadingIndicator).toBeVisible();

      // Wait for the loading indicator to disappear
      await expect(loadingIndicator).not.toBeVisible({ timeout: 10000 });

      // Wait for search results to appear
      const resultsLocator = page.locator('[role="option"]'); // Use the correct role or selector for search results
      await expect(resultsLocator.first()).toBeVisible({ timeout: 10000 });

      // Verify that at least one search result contains the expected company name and ticker
      const resultsCount = await resultsLocator.count();
      let found = false;
      for (let i = 0; i < resultsCount; i++) {
        const resultText = await resultsLocator.nth(i).innerText();
        if (resultText.includes('AAPL | Apple Inc')) {
          found = true;
          break;
        }
      }
      expect(found).toBe(true);
    }

    // Select the first search result
    const resultsLocator = page.locator('[role="option"]');
    await resultsLocator.first().click();

    // Check if the Details component appears with the selected stock's ticker
    const detailsComponent = page.locator('text=AAPL');
    await expect(detailsComponent).toBeVisible();

    // Add the stock to the watchlist
    const addToWatchlistButton = page.locator('button:has-text("Add to Watchlist")'); // Adjust the selector as necessary
    await addToWatchlistButton.click();

    // Navigate to the watchlist page
    await page.goto('http://localhost:3000/watchlist');

    // Verify that the watchlist now contains the added item
    const watchlistItem = page.locator('text=AAPL');
    await expect(watchlistItem).toBeVisible();

    // Remove the item from the watchlist
    const removeButton = page.locator('button:has-text("Remove from watchlist")');
    await removeButton.click();

    // Verify that the watchlist is empty again
    const emptyWatchlistMessage = page.locator('text=Your Watchlist is empty!');
    await expect(emptyWatchlistMessage).toBeVisible();
  });
});





import { test, expect } from '@playwright/test';

test.describe('StockTabs Component', () => {
  test.beforeEach(async ({ page }) => {
    // Navigate to the stock page with a specific ticker symbol
    await page.goto('http://localhost:3000/stock/AAPL'); // Adjust URL as necessary
  });

  test('should switch between tabs and load content', async ({ page }) => {
    // Wait for the Summary tab content to load
    await expect(page.locator('text=Loading summary...')).toBeVisible();
    await expect(page.locator('text=Loading summary...')).not.toBeVisible({ timeout: 10000 });

    // Verify that summary data is displayed
    const summaryComponent = page.locator('text=Stock Summary Data'); // Adjust text to match actual summary data
    await expect(summaryComponent).toBeVisible();

    // Switch to the Top News tab
    const newsTab = page.locator('text=Top News');
    await newsTab.click();

    // Wait for the news data to load
    await expect(page.locator('text=Loading news...')).toBeVisible();
    await expect(page.locator('text=Loading news...')).not.toBeVisible({ timeout: 10000 });

    // Verify that news data is displayed
    const newsComponent = page.locator('text=News Component'); // Adjust text to match actual news component
    await expect(newsComponent).toBeVisible();

    // Switch to the Charts tab
    const chartsTab = page.locator('text=Charts');
    await chartsTab.click();

    // Verify that the chart is displayed
    const chartComponent = page.locator('text=Historical Chart'); // Adjust text to match actual chart component
    await expect(chartComponent).toBeVisible();
  });
});







import { test, expect } from '@playwright/test';

// Define the test
test('Stock Tabs Test', async ({ page }) => {
  // Navigate to the search page
  await page.goto('http://localhost:3000/search'); // Replace with your actual URL

  // Wait for the page to load
  await page.waitForLoadState('networkidle');

  // Type a company name into the search input
  await page.fill('#searchInput', 'Apple'); // Replace with any valid company name or keyword

  // Wait for search suggestions to appear
  await page.waitForSelector('[role="option"]');

  // Click on the first search suggestion
  const firstSuggestion = page.locator('[role="option"]').first();
  await firstSuggestion.click();

  // Wait for the summary content to load
  await page.waitForSelector('.summary-content');

  // Check if the summary content is visible
  const summaryVisible = await page.isVisible('.summary-content');
  expect(summaryVisible).toBeTruthy();

  // Find and click on the Top News tab
  await page.click('text=Top News');

  // Wait for the news content to load
  await page.waitForSelector('.news-container');

  // Check if the news content is visible
  const newsVisible = await page.isVisible('.news-container');
  expect(newsVisible).toBeTruthy();

  // Find and click on the Charts tab
  await page.click('text=Charts');

  // Wait for the charts to load
  await page.waitForSelector('.highcharts-container');

  // Check if the charts are visible
  const chartsVisible = await page.isVisible('.highcharts-container');
  expect(chartsVisible).toBeTruthy();
});







import { test, expect } from '@playwright/test';

test.describe('Theme Switching', () => {
  test.beforeEach(async ({ page }) => {
    // Navigate to the home page before each test
    await page.goto('http://localhost:3000');
  });

  test('should toggle between light and dark modes globally', async ({ page }) => {
    // Check initial theme on the home page
    const appBar = page.locator('header');
    await expect(appBar).toHaveClass(/bg-green-800/); // Assuming green-800 is the initial light mode class

    // Toggle the theme switch
    await page.click('input[type="checkbox"]');

    // Verify the dark mode theme is applied globally
    await expect(appBar).toHaveClass(/bg-gray-900/); // Assuming gray-900 is the dark mode class

    // Navigate to another page (Search)
    await page.click('button[aria-label="menu"]');
    await page.click('text=Search');
    const searchAppBar = page.locator('header');
    await expect(searchAppBar).toHaveClass(/bg-gray-900/); // Confirm dark mode on the Search page

    // Toggle back to light mode
    await page.click('input[type="checkbox"]');

    // Verify light mode is applied globally
    await expect(appBar).toHaveClass(/bg-green-800/); // Back to initial light mode on the home page

    // Navigate back to home page to ensure consistency
    await page.goto('http://localhost:3000');
    await expect(appBar).toHaveClass(/bg-green-800/); // Ensure light mode on home page after navigation
  });
});









// tests/searchComponent.spec.ts
import { test, expect } from '@playwright/test';

test.describe('Search Component', () => {
  test.beforeEach(async ({ page }) => {
    // Navigate to the search page
    await page.goto('http://localhost:3000/search');
  });

  test('should show loading indicator and display search results progressively', async ({ page }) => {
    // Define the progressive inputs
    const progressiveInputs = ['A', 'Ap', 'App', 'Appl', 'Apple'];

    for (const input of progressiveInputs) {
      // Type into the search input
      await page.fill('#searchInput', input);

      // Check if the loading indicator is visible
      const loadingIndicator = page.locator('[role="progressbar"]'); // Adjust the selector to match the actual loading indicator
      await expect(loadingIndicator).toBeVisible();

      // Wait for the loading indicator to disappear
      await expect(loadingIndicator).not.toBeVisible({ timeout: 10000 });

      // Wait for search results to appear
      const resultsLocator = page.locator('[role="option"]'); // Use the correct role or selector for search results
      await expect(resultsLocator.first()).toBeVisible({ timeout: 10000 });

      // Verify that at least one search result contains the expected company name and ticker
      const resultsCount = await resultsLocator.count();
      let found = false;
      for (let i = 0; i < resultsCount; i++) {
        const resultText = await resultsLocator.nth(i).innerText();
        if (resultText.includes('AAPL | Apple Inc')) {
          found = true;
          break;
        }
      }
      expect(found).toBe(true);
    }

    // Select the first search result
    const resultsLocator = page.locator('[role="option"]');
    await resultsLocator.first().click();

    // Check if the Details component appears with the selected stock's ticker
    const detailsComponent = page.locator('text=AAPL');
    await expect(detailsComponent).toBeVisible();
  });
});







  test('should show no results toast message', async ({ page }) => {
    // Type into the search input
    await page.fill('#searchInput', 'UNKNOWN_COMPANY');

    // Wait for the no results toast message
    const toastMessage = page.locator('.Toastify__toast--error');
    await expect(toastMessage).toContainText('No results found!');
  });

  test('should handle search input debouncing', async ({ page }) => {
    // Type quickly into the search input
    await page.fill('#searchInput', 'Ap');
    await page.fill('#searchInput', 'Apple');

    // Wait for search results to appear
    const resultsLocator = page.locator('[role="option"]'); // Use the correct role or selector for search results
    await expect(resultsLocator).toBeVisible();

    // Verify that the search results contain the expected company name and ticker
    await expect(resultsLocator).toContainText('AAPL | Apple Inc');
  });
});









// tests/searchComponent.spec.ts
import { test, expect } from '@playwright/test';

test.describe('Search Component', () => {
  test.beforeEach(async ({ page }) => {
    // Navigate to the search page
    await page.goto('http://localhost:3000/search');
  });

  test('should show loading indicator and display search results', async ({ page }) => {
    // Type into the search input
    await page.fill('#searchInput', 'AAPL');

    // Check if the loading indicator is visible
    await expect(page.locator('role=circularprogress')).toBeVisible();

    // Wait for search results to appear
    const resultsLocator = page.locator('role=option');
    await expect(resultsLocator).toBeVisible();

    // Verify that the search results contain the expected stock
    await expect(resultsLocator).toContainText('AAPL');

    // Select a search result
    await resultsLocator.first().click();

    // Check if the Details component appears with the selected stock's ticker
    const detailsComponent = page.locator('text=AAPL');
    await expect(detailsComponent).toBeVisible();
  });

  test('should show no results toast message', async ({ page }) => {
    // Type into the search input
    await page.fill('#searchInput', 'UNKNOWN_STOCK');

    // Wait for the no results toast message
    const toastMessage = page.locator('.Toastify__toast--error');
    await expect(toastMessage).toContainText('No results found!');
  });

  test('should handle search input debouncing', async ({ page }) => {
    // Type quickly into the search input
    await page.fill('#searchInput', 'AP');
    await page.fill('#searchInput', 'AAPL');

    // Wait for search results to appear
    const resultsLocator = page.locator('role=option');
    await expect(resultsLocator).toBeVisible();

    // Verify that the search results contain the expected stock
    await expect(resultsLocator).toContainText('AAPL');
  });
});






import { test, expect } from '@playwright/test';

test.describe('Watchlist Component', () => {
  test.beforeEach(async ({ page }) => {
    // Navigate to the watchlist page
    await page.goto('http://localhost:3000/watchlist');
  });

  test('should add stock to watchlist and display it, then remove it and check if watchlist is empty', async ({ page }) => {
    // Step 1: Add stock to watchlist
    await page.evaluate(() => {
      localStorage.setItem('watchlist', JSON.stringify(['AAPL']));
    });
    await page.reload();

    // Step 2: Verify the stock is displayed in the watchlist
    await page.route('**/api/stock-summary/AAPL', (route) => {
      route.fulfill({
        status: 200,
        body: JSON.stringify({
          ticker: 'AAPL',
          companyName: 'Apple Inc.',
          lastPrice: '145.09',
          prevClose: '143.00',
        }),
      });
    });

    // Wait for the watchlist to be populated
    const watchlistCard = page.locator('.shadow-md');
    await expect(watchlistCard).toHaveCount(1);

    // Verify the stock details are displayed correctly
    await expect(watchlistCard).toContainText('AAPL');
    await expect(watchlistCard).toContainText('Apple Inc.');
    await expect(watchlistCard).toContainText('145.09');
    await expect(watchlistCard).toContainText('(2.09%)');

    // Step 3: Remove the stock from the watchlist
    await page.locator('button[title="Remove from watchlist"]').click();

    // Wait for the watchlist to be empty
    await expect(page.locator('.shadow-md')).toHaveCount(0);

    // Step 4: Verify the "Your Watchlist is empty!" message is displayed
    await expect(page.locator('text=Your Watchlist is empty!')).toBeVisible();
  });
});












import { test, expect } from '@playwright/test';

test.describe('Navbar Component', () => {
  test.beforeEach(async ({ page }) => {
    // Navigate to the home page before each test
    await page.goto('http://localhost:3000');
  });

  test('should render the Navbar with all components', async ({ page }) => {
    // Check if the Navbar is rendered
    const navbar = page.locator('header');
    await expect(navbar).toBeVisible();

    // Check if the title is displayed
    const title = navbar.locator('text=Stock Market');
    await expect(title).toBeVisible();

    // Check if the menu icon is displayed
    const menuIcon = navbar.locator('button[aria-label="menu"]');
    await expect(menuIcon).toBeVisible();

    // Check if the theme switch is displayed
    const themeSwitch = navbar.locator('input[type="checkbox"]');
    await expect(themeSwitch).toBeVisible();
  });

  test('should navigate to the correct paths when menu items are clicked', async ({ page }) => {
    // Click the menu icon to open the menu
    await page.click('button[aria-label="menu"]');

    // Click the Search menu item and verify navigation
    await page.click('text=Search');
    await expect(page).toHaveURL('http://localhost:3000/search');

    // Navigate back to home
    await page.goto('http://localhost:3000');

    // Click the menu icon to open the menu
    await page.click('button[aria-label="menu"]');

    // Click the Watchlist menu item and verify navigation
    await page.click('text=Watchlist');
    await expect(page).toHaveURL('http://localhost:3000/watchlist');
  });

  test('should toggle between light and dark modes', async ({ page }) => {
    // Check initial theme
    const appBar = page.locator('header');
    await expect(appBar).toHaveClass(/bg-green-800/);

    // Toggle the theme switch
    await page.click('input[type="checkbox"]');

    // Verify the dark mode theme is applied
    await expect(appBar).toHaveClass(/bg-gray-900/);

    // Toggle the theme switch back
    await page.click('input[type="checkbox"]');

    // Verify the light mode theme is applied
    await expect(appBar).toHaveClass(/bg-green-800/);
  });
});







import { test, expect } from '@playwright/test';

// Define the test
test('Stock Tabs Test', async ({ page }) => {
  // Navigate to your application
  await page.goto('http://localhost:3000'); // Replace with your actual URL

  // Wait for the page to load
  await page.waitForLoadState('networkidle');

  // Find and click on the Summary tab
  await page.click('text=Summary');

  // Wait for the summary content to load
  await page.waitForSelector('.summary-content');

  // Check if the summary content is visible
  const summaryVisible = await page.isVisible('.summary-content');
  expect(summaryVisible).toBeTruthy();

  // Find and click on the Top News tab
  await page.click('text=Top News');

  // Wait for the news content to load
  await page.waitForSelector('.news-container');

  // Check if the news content is visible
  const newsVisible = await page.isVisible('.news-container');
  expect(newsVisible).toBeTruthy();

  // Find and click on the Charts tab
  await page.click('text=Charts');

  // Wait for the charts to load
  await page.waitForSelector('.highcharts-container');

  // Check if the charts are visible
  const chartsVisible = await page.isVisible('.highcharts-container');
  expect(chartsVisible).toBeTruthy();
});
